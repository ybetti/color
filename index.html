<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Map</title>
<style>
  /* スタイル調整 */
  #color-map {
    display: flex;
    flex-wrap: wrap;
  }
  .color-block {
    width: 50px;
    height: 50px;
    margin: 5px;
    border: 1px solid #000;
  }
</style>
</head>
<body>
<h1>Color Map2</h1>
<input type="file" id="file-input" accept=".csv">
<div id="color-map"></div>

<script>
document.getElementById('file-input').addEventListener('change', handleFileSelect, false);

function handleFileSelect(event) {
  const file = event.target.files[0];
  const reader = new FileReader();
  reader.onload = function(event) {
    const csv = event.target.result;
    processData(csv);
  };
  reader.readAsText(file);
}

function processData(csv) {
  const data = csv.split('\n').map(row => row.trim().split(','));
  const numbers = data.map(row => parseFloat(row[0]));
  const max = Math.max(...numbers);
  const min = Math.min(...numbers);
  const step = (max - min) / 10;

  const colorMap = document.getElementById('color-map');
  colorMap.innerHTML = '';

  for (let i = 0; i < 10; i++) {
    const rangeMin = min + step * i;
    const rangeMax = min + step * (i + 1);
    const color = getColor(i);
    const div = document.createElement('div');
    div.classList.add('color-block');
    div.style.backgroundColor = color;
    div.textContent = `${rangeMin.toFixed(2)} - ${rangeMax.toFixed(2)}`;
    colorMap.appendChild(div);
  }
}

function getColor(index) {
  // ここで、各段階の色を自由に設定できます
  const colors = ['#FF0000', '#FF4500', '#FFA500', '#FFFF00', '#00FF00', '#00FFFF', '#0000FF', '#8A2BE2', '#FF00FF', '#800080'];
  return colors[index];
}
</script>
</body>
</html>
